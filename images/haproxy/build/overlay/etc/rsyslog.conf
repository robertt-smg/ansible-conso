# Loads the imudp into rsyslog address space
# and activates it.
# IMUDP provides the ability to receive syslog
# messages via UDP.
$ModLoad imudp
$ModLoad imtcp 

# redirect /var/log/syslog to stdout
$ModLoad imuxsock

# Address to listen for syslog messages to be 
# received.
$UDPServerAddress 0.0.0.0


# Port to listen for the messages
$UDPServerRun 514
$InputTCPServerRun 514

# Take the messages of any priority sent to the
# local0 facility (which we reference in the haproxy
# configuration) and send to the haproxy.log 
# file.
#local0.* -/var/log/haproxy.log
local0.* /var/log/haproxy/haproxy.log

# Set default file format
# https://www.rsyslog.com/doc/v8-stable/configuration/templates.html
$ActionFileDefaultTemplate RSYSLOG_FileFormat

$WorkDirectory /var/spool/rsyslog
*.*;auth,authpriv.none /dev/stdout

# Discard the rest
& ~