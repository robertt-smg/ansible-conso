#jinja2: trim_blocks:False
# DO NOT CHANGE THIS FILE !!!
# This config is generated by ansible
# and all change will be overrided on next ansible run

{#-
===== FETCH DATA =====
-#}
{%- set supported_sections = mariadbcnf_supported_sections -%}
{#-
===== COMBINE DATA =====
-#}
{%- set goodParamList = mysql.config.sections | default({}) -%}

{%- for section_name in supported_sections -%}
{%- set sectdict = mysql.config.sections[section_name] | default({}) -%}
{%- set pillar_data = vars['mysql']['server'][section_name] | default({}) -%}

{%- for mparam, mvalue in pillar_data.items() -%}
{%- set mparamUnderscore = mparam | replace('-', '_') -%}
{%- set sectdict = sectdict | combine({mparamUnderscore: mvalue}) -%}
{%- endfor -%}

{%- set goodParamList = goodParamList | combine({section_name: sectdict}) -%}
{%- endfor -%}
{#-
===== PRINT DATA =====
-#}
{%- for sname,sdata in goodParamList.items() -%}
{%- if sdata %}

[{{ sname }}]
{%- for mparam, mvalue in sdata.items()|default([])|sort -%}
{%- if mvalue is none %}{# continue #}{%- else -%}
{%- set indents = 40 - mparam|count %}
{% if mvalue == "noarg_present" -%}
{{ mparam }}
{%- else -%}
{%- if mvalue is iterable and mvalue is not string -%}
{%- for item in mvalue -%}
{%- if item is none %}{# continue #}{%- else -%}
{{ mparam }}{{ '='|indent(indents, true) }} {{ item }}
 
{% endif -%}
{% endfor -%}
{%- else -%}
{{ mparam }}{{ '='|indent(indents, true) }} {{ mvalue }}
 
{%- endif -%}
{%- endif -%}
{% endif -%}
{%- endfor -%}
{%- endif -%}
{%- endfor %}

{{ mysql.config.append | default('') }}
